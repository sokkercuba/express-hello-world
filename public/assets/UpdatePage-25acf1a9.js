import{r as e,a,v as t,j as r,p as s,A as l,at as n,T as i,U as o,V as u,W as c,x as d,ae as m,N as p,e as h}from"./vendor-e69cc4a7.js";import{c as v,A as y,h as f,b as g}from"./index-e199f5b2.js";const x={all:"All",user:"User",players:"Players",juniors:"Juniors",cweek:"Current Week",tsummary:"Training Summary",training:"Team Training History"};function b(){const{state:b,dispatch:j}=e.useContext(y),{username:S}=b,[T,W]=e.useState(""),[C,k]=e.useState("all");return a(t,{component:"main",maxWidth:"xs",children:r(s,{sx:{marginTop:8,display:"flex",alignItems:"center",flexDirection:"column"},children:[a(l,{sx:{m:1,bgcolor:"secondary.main"},children:a(n,{})}),a(i,{component:"h1",variant:"h5",children:"Update your data"}),r(o,{fullWidth:!0,sx:{mt:3},children:[a(u,{id:"update-select-label",children:"Select type"}),a(c,{value:C,id:"update-select",label:"Update type",onChange:e=>{k(e.target.value)},labelId:"update-select-label",children:Object.keys(x).map((e=>a(d,{value:e,children:x[e]},e)))})]}),r(s,{sx:{mt:1,width:"100%"},children:[a(o,{fullWidth:!0,children:a(m,{required:!0,fullWidth:!0,autoFocus:!0,id:"json-input",name:"update",margin:"normal",label:"Paste here",value:T,onChange:e=>{W(e.target.value)}})}),a(p,{fullWidth:!0,type:"submit",variant:"contained",sx:{mt:3,mb:2},onClick:async e=>{e.preventDefault();const a="all"===C,t=((e,a)=>{const t=v.getSchema(a);if(!t)return null;try{const a=JSON.parse(e);return t(a)?a:(console.log("validation errors: ",t.errors),null)}catch{return null}})(T,C),r=a?S:C;if(console.log("ðŸš€ ~ updateType:",C),t){const e=a?t:{[C]:t},s=await f(`/api/v1/users/${S}`,"PATCH",j,e),{error:l,status:n}=s;if(l||200!==n)return;W(""),a&&g(j,{...e}),h(`You have successfully updated your ${r} data into our database`,{variant:"success"})}else h(`Data validation failed, please verify it is a valid ${r} data object`,{variant:"error"})},children:"Save"})]})]})})}export{b as default};

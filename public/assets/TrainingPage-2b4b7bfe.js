import{a as e,p as n,ax as i,r as l,j as a,U as t,V as s,W as r,x as d,R as o,ay as c,az as g,aA as h,aB as m,aC as p,aD as u,aE as f}from"./vendor-e69cc4a7.js";import{P as b}from"./PageTabs-bbf65fd2.js";import{A as k}from"./index-76388e24.js";const y=[{id:"week",label:"Week",minWidth:48},{id:"age",label:"Age",minWidth:48},{id:"stamina",label:"Stam",minWidth:48,align:"center"},{id:"pace",label:"Pace",minWidth:48,align:"center"},{id:"technique",label:"Tech",minWidth:48,align:"center"},{id:"passing",label:"Pass",minWidth:48,align:"center"},{id:"keeper",label:"Keep",minWidth:48,align:"center"},{id:"defending",label:"Def.",minWidth:48,align:"center"},{id:"playmaking",label:"Plmk",minWidth:48,align:"center"},{id:"striker",label:"Strk",minWidth:48,align:"center"},{id:"type",label:"Type",minWidth:48,align:"left"},{id:"pos",label:"Pos.",minWidth:48,align:"left"},{id:"kind",label:"Kind",minWidth:48,align:"left"},{id:"games",label:"Games",minWidth:48,align:"left"},{id:"eff",label:"Eff.",minWidth:48,align:"left"}];const v=["playmaking","striker","keeper","pace","defending","technique","passing"];function x(e){const n={};v.forEach((i=>{const l=e.filter((e=>{const{kind:n,type:l,intensity:a}=e;return i===l.name&&"missing"!==n.name&&a>=50}));if(l.length>=3){const e=l.length,a=l[0].skills[i]-l[e-1].skills[i];if(a>0){const l=e/a;n[i]=parseFloat(l.toFixed(1))}else n[i]=0}else n[i]=0}));const i=Object.values(n),l=i.reduce(((e,n)=>e+n),0);let a=0;return l>0&&(a=l/i.filter((e=>0!==e)).length),n.averageGrowth=parseFloat(a.toFixed(2)),n}function W(){const b=i(),{state:v}=l.useContext(k),{players:W,training:P}=v,[S,w]=l.useState(0),[R,C]=l.useState(25),[E,I]=l.useState((null==W?void 0:W.players[0])||null),[j,A]=l.useState([]),M=(null==W?void 0:W.players)?W.players:[],O=l.useMemo((()=>M.length?M.find((e=>e.info.name.full===(null==E?void 0:E.info.name.full))):null),[E,M]),T=l.useMemo((()=>{var i;const l=(null==P?void 0:P.length)?P.find((e=>e.id===(null==E?void 0:E.id))):null;if(A((null==l?void 0:l.reports)||[]),l&&(null==(i=l.reports)?void 0:i.length)){return l.reports.map((i=>{const{week:l,skills:a,age:t,skillsChange:s,type:r,formation:d,kind:o,games:c,intensity:g,injury:h}=i,m=d.name,p=r.name,u="missing"===o.name&&h.daysRemaining>6?"injured":o.name,f=t||(null==E?void 0:E.info.characteristics.age)||0,b=`${c.minutesOfficial}'/${c.minutesFriendly}'/${c.minutesNational}'`,k=(({skills:i,skillsChange:l})=>{const a={};return Object.entries(l).forEach((([l,t])=>{const s=t>0?"#4caf50":t<0?"#f44336":"transparent";a[l]=e(n,{sx:{backgroundColor:s,borderRadius:"4px"},children:i[l]})})),a})({skills:a,skillsChange:s}),{stamina:y,pace:v,technique:x,passing:W,keeper:P,defending:S,playmaking:w,striker:R}=k;return function(e,n,i,l,a,t,s,r,d,o,c,g,h,m,p){return{week:e,age:n,stamina:i,pace:l,technique:a,passing:t,keeper:s,defending:r,playmaking:d,striker:o,type:c,pos:g,kind:h,games:m,eff:p}}(l,f,y,v,x,W,P,S,w,R,p,m,u,b,g)}))}return null}),[P,E]);return a(n,{children:[a(n,{sx:{gap:"24px",display:"flex",alignItems:"center"},children:[a(t,{sx:{minWidth:210},children:[e(s,{id:"player-select-label",children:"Players"}),e(r,{label:"Players",id:"player-select",labelId:"player-select-label",onChange:e=>{const n=M.find((n=>n.info.name.full===e.target.value))||null;I(n)},value:(null==O?void 0:O.info.name.full)||"",inputProps:{MenuProps:{disableScrollLock:!0}},children:M.map((({id:n,info:i})=>e(d,{value:i.name.full,children:i.name.full},n)))})]}),a(n,{sx:{gap:"8px",display:"flex",alignItems:"center"},children:["Gross Talent: ",x(j).averageGrowth]})]}),E&&e(n,{mt:2,children:a(o,{variant:"outlined",sx:{width:"100%",overflow:"hidden"},children:[e(c,{children:a(g,{stickyHeader:!0,"aria-label":"sticky table",children:[e(h,{children:e(m,{children:y.map((n=>e(p,{align:n.align,style:{minWidth:n.minWidth,fontWeight:"bold"},children:n.label},n.id)))})}),e(u,{children:T&&T.slice(S*R,S*R+R).map((n=>e(m,{hover:!0,role:"checkbox",tabIndex:-1,children:y.map((i=>{const l="light"===b.palette.mode?"#e0e0e0":"#515151",a="age"===i.id?{borderRight:`1px solid ${l}`}:{},t="type"===i.id?{borderLeft:`1px solid ${l}`}:{},s=n[i.id];return e(p,{align:i.align,sx:{...t,...a},children:s},i.id)}))},n.week)))})]})}),e(f,{page:S,component:"div",rowsPerPage:R,count:(null==T?void 0:T.length)||0,onPageChange:(e,n)=>{w(n)},rowsPerPageOptions:[10,25,100],onRowsPerPageChange:e=>{C(+e.target.value),w(0)}})]})})]})}const P=[{label:"MAIN TEAM PROGRESS",children:"MAIN TEAM PROGRESS"},{label:"INDIVIDUAL REPORTS",children:e(W,{})}];function S(){return e(b,{tabs:P})}export{S as default};

import{r as a,a as e,N as n,p as o,j as t,n as r,A as s,Z as i,T as l,_ as d,$ as c,a0 as m,I as p,a1 as u,a2 as h,a3 as g,a4 as b,E as f,a5 as x,o as w}from"./vendor-d93f30fb.js";import{A as y,h as v,s as S,a as C}from"./index-faa04d4e.js";function D(){const{state:D,dispatch:I}=a.useContext(y),{loggedIn:W}=D,[k,T]=a.useState(!1),[j,A]=a.useState(!1);if(W)return e(n,{to:"/"});return e(o,{component:"main",maxWidth:"xs",children:t(r,{sx:{marginTop:8,display:"flex",alignItems:"center",flexDirection:"column"},children:[e(s,{sx:{m:1,bgcolor:"secondary.main"},children:e(i,{})}),e(l,{component:"h1",variant:"h5",children:"Sign in"}),t(r,{component:"form",onSubmit:async a=>{a.preventDefault();const e=new FormData(a.currentTarget),n=await v("/api/auth/v1/login","POST",I,{login:e.get("login"),password:e.get("password")}),{user:o,error:t,status:r}=n;t&&200!==r||(S(I,!0),C(I,o.login))},sx:{mt:1,width:"100%"},children:[t(d,{fullWidth:!0,children:[e(c,{required:!0,fullWidth:!0,autoFocus:!0,id:"login",name:"login",margin:"normal",label:"Username",autoComplete:"Username"}),e(c,{required:!0,fullWidth:!0,id:"password",margin:"normal",name:"password",label:"Password",autoComplete:"password",type:j?"text":"password",sx:{backgroundColor:"rgb(232,240,254)"},InputProps:{endAdornment:e(m,{position:"end",children:e(p,{edge:"end",onClick:()=>A((a=>!a)),onMouseDown:a=>{a.preventDefault()},"aria-label":"toggle password visibility",children:e(j?u:h,{})})})}}),e(g,{label:"Remember me",control:e(b,{color:"primary",checked:k,onChange:a=>{T(a.target.checked)}})})]}),e(f,{fullWidth:!0,type:"submit",variant:"contained",sx:{mt:3,mb:2},children:"Sign In"})]}),e(x,{container:!0,children:t(x,{item:!0,typography:"body2",children:["Don't have an account?"," ",e(w,{variant:"body1",component:"button",children:"Sign Up"})]})})]})})}export{D as default};
